# TIP 584: Better introspection for ttk
	Author:         Francois Vogel <fvogelnew1@free.fr>
	State:          Draft
	Type:           Project
	Vote:           Pending
	Created:        24-Aug-2020
	Post-History:   
	Keywords:       Tk ttk introspection
	Tcl-Version:    8.7
	Tk-Branch:      ttk_introspect
	Tk-Branch:      tip-584
-----

# Abstract

This TIP proposes to improve introspection capabilities of ttk.

# Rationale

People regularly request (for instance
[in TkDocs](https://tkdocs.com/tutorial/styles.html#using),
in [TIP #555](https://core.tcl-lang.org/tips/doc/trunk/tip/555.md),
or recently again in
[comp.lang.tcl](https://groups.google.com/d/msg/comp.lang.tcl/5E9kGZ5wEHQ/74JAo7-bAwAJ))
that ttk introspection capabilities be improved.

As it seems, the really missing bit is the ability to retrieve all available <u>styles</u>.

# Specification

A new subcommand

<b>ttk::style theme styles</b> <i>?themeName?</i>

is created.
It returns a list of all styles from <i>themeName</i>. If <i>themeName</i>
is omitted, the current theme is used.

With this new command, the user can request all styles available in a given
theme (or in the current theme). For example on Windows one can get:

<pre>
    % ttk::style theme names
    winnative clam alt default classic vista xpnative
    % set curtheme [ttk::style theme use]
    vista
    % # leverage the new command ttk::style theme styles
    % ttk::style theme styles $curtheme
    Label TScale Horizontal.TScale TMenubutton TLabelframe.Label Vertical.TProgressbar TEntry TRadiobutton TButton Heading Toolbutton TNotebook.Tab ComboboxPopdownFrame Treeview Vertical.TScale TCombobox TNotebook TProgressbar Horizontal.TProgressbar . TCheckbutton Item TSpinbox Tab
    % ttk::style theme styles clam
    TMenubutton TEntry TLabelframe Vertical.Sash TRadiobutton Heading TButton TNotebook.Tab Toolbutton Treeview ComboboxPopdownFrame TCombobox TProgressbar . TCheckbutton Tab TSpinbox Horizontal.Sash Sash
</pre>


Then it becomes straightforward to get all <u>layouts</u>, as originally requested
in [TIP #555](https://core.tcl-lang.org/tips/doc/trunk/tip/555.md):

<pre>
    # get layout for each style
    foreach st [ttk::style theme styles] {
        if {[catch {ttk::style layout $st}]} {
            puts "$st: has no layout"
        } else {
            puts "$st:\n[ttk::style layout $st]"
        }
    }
</pre>

This spits:

<pre>
    Label:
    Label.fill -sticky nswe -children {Label.text -sticky nswe}
    TScale: has no layout
    Horizontal.TScale:
    Scale.focus -sticky nswe -children {Horizontal.Scale.trough -sticky nswe -children {Horizontal.Scale.track -sticky we Horizontal.Scale.slider -side left -sticky {}}}
    <...and so on...> 
</pre>


# Implementation

See the [`ttk_introspect`](https://core.tcl-lang.org/tk/timeline?r=ttk_introspect&unhide) branch, aka [`tip-584`](https://core.tcl-lang.org/tk/timeline?r=tip-584&unhide).

This branch targets 8.7.

# Copyright

This document has been placed in the public domain.
