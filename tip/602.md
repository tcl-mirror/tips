# TIP 601: remove home folder shortcuts "~/" and "~user/" from file commands
	Author:         Harald Oehlmann <harald.oehlmann@elmicron.de>
	State:          Draft
	Type:           Project
	Vote:           Pending
	Tcl-Version:    9.0
-----
# Abstract

A user home folder is inserted, if a file path starts with "~".
This proposal is to remove this functionality.

# Rationale

A file name: "~abc.txt" is interpreted as the home folder of user "abc.txt".
This results in an error message, even if the file exists.

This mimic may be helpful in an interactive shell, but makes access to files starting with "~" quite difficult.
The file name must be prefixed by "./", if it is in the beginning of a file path.

The required code for file handling for files from foreign sources is:

    if {[string match ~* $path]} {
        set path "./$path"
    }

And the other way around on file output.

# Specification

Remove the special handling of "~" from TCL file commands.

If it is used somewhere, replace it by a construction like "$env(HOME)/".

# Discussion

## clt thread

Please refer to the CLT thread titled "User does not exists when file name start with ~" and started 2021-05-06 10:13

Some highlights:

### broken code to fixed by this TIP

    open [lindex $argv 0] ;

or:

    foreach fn [glob *] { open $fn } ;

the latter is especially puzzling, once you have a file starting with ~ in the directory, it suddenly fails.

### Compatibility remark

And, the ~ breakage appears in the first run of an old script in a 
future v9 interpreter (file not found error) while the hidden latent 
data dependent bug is just waiting to bite someday.

## wiki

Here is the wiki page dedicated to this issue:

<https://wiki.tcl-lang.org/page/Tilde+Substitution>

# Implementation

ToDo - volunteers ?

# Compatibility

No compatibility, as targeting TCL9.

# Copyright

This document has been placed in the public domain.
