# TIP 489: Add image widget command to the Tk canvas
	Author:         Scott Pitcher <scottypitcher@gmail.com>
	State:          Draft
	Type:           Project
	Vote:           Pending
	Created:        02-Dec-2017
	Post-History:
	Keywords:       canvas, image
	Tcl-Version:    8.7
-----

# Abstract

This TIP adds an "image" widget command to the Tk canvas. This new command provides a mechanism for the contents of the canvas to be drawn onto a Tk photo image.

# Rationale

The canvas is an amazing tool or drawing and managing graphical objects. One thing it lacks is a method for creating an image of the canvas contents. There are various alternate methods which generally involve some form of screen capture (see https://wiki.tcl.tk/9127 and https://wiki.tcl.tk/10415), but nothing that can capture a simple image.

The original application for canvas image was to render a printer page at 300dpi, which involves a canvas perhaps approximately 3300px high and as much as approximately 2400px wide. For this reason the extension was given the ability to draw even when the canvas is unmapped, providing one of the ancestors is mapped.

An optional subsample and zoom paramter can be specified, and the Tk_PhotoPutZoomedBlock() will be used to draw into the Tk image instead of the Tk_PhotoPutBlock(). The boundaries of the region drawn are set by the canvas -scrollregion boundaries, and if one hasn't been defined then the canvas width and height with an origin of 0,0 is used.

# Examples

First example of the "canvas image" command follows. Here a Tk photo image named "testimage" is drawn on by canvas .c, with no subsample or zoom. After the image is drawn the size of the Tk photo image size will be 100px x 100px, the same as the canvas -scrollregion.

  .c configure -scrollregion {0 0 99 99}
  .c image testimage

This example shows the subsample option being used. After the canvas is drawn onto the Tk photo image, the image size will be 1/4 that of the canvas source drawn.

  .c image testimage 4

And this time with subsample of 1 and zoom of 2, resulting in an image twice as large as the canvas source region.

  .c image testimage 1 2
 
# Implementation

An implementation of this TIP can be found in the [Tk canvas_image branch]
(https://core.tcl.tk/tk/timeline?r=canvas_image).

# Copyright

This document has been placed in the public domain.

